{% set todo_list = '{}/todos.json'.format(settings['module_path'])|load_json %}
{% do todo_list|print %}

<script>
var store = function(id) {
    var tempItem = document.getElementById(id);
    if (localStorage.getItem(id) === "true") {
        localStorage.setItem(id, "false");
    } else {
        localStorage.setItem(id, "true");
    }
};

var getActive = function(id) {
    console.log(id);
    console.log("this is doing something");
    var status = localStorage.getItem(id);
    var el = document.getElementById(id);

    console.log(status);
    console.log(el)
    if ( status === "true" ) {
        el.className += " active";
    }
};
</script>

<h1>To-Do List</h1>

<b>This checklist is only saved locally to your browser for your own reference!</b>

<div class="todo-list">

    {% for name, todo_dict in todo_list.items() %}
        <div class="row">
        {% set id_name = '{}_{}'.format(todo_dict['short-name'], settings['module_num']) %}
        <div class="col-1"><button type="button" data-cfw="button" onclick="store('{{ id_name }}')"
                                   class="btn btn-todo" id="{{ id_name }}">
{#            <i class="fa fa-circle-o"></i>#}
        </button>
            <script type="text/javascript">
                getActive("{{ id_name }}");
            </script>

        </div>
        <div class="col-11">
{#        <a class="todo-item" href="{{ todo_dict['link'] }}" >{{ name }}</a>#}
            <div class="todo-item mx-auto">{{ name }}</div>
        </div>
        </div>
    {% endfor %}

</div>